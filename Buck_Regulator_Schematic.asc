Version 4
SHEET 1 2180 1056
WIRE 448 -480 448 -496
WIRE 128 -448 128 -512
WIRE 368 -448 304 -448
WIRE 368 -416 304 -416
WIRE 576 -416 544 -416
WIRE 368 -384 304 -384
WIRE 128 -336 128 -368
WIRE 448 -320 448 -352
WIRE 128 -288 128 -336
WIRE 144 -288 128 -288
WIRE 128 -272 128 -288
WIRE 80 -256 -16 -256
WIRE 144 -224 144 -288
WIRE 144 -224 128 -224
WIRE -336 -176 -336 -224
WIRE -16 -144 -16 -256
WIRE -16 -144 -256 -144
WIRE -432 -112 -736 -112
WIRE 128 -96 128 -176
WIRE 176 -96 128 -96
WIRE 272 -96 176 -96
WIRE 464 -96 352 -96
WIRE 544 -96 464 -96
WIRE 624 -96 544 -96
WIRE 704 -96 624 -96
WIRE 784 -96 704 -96
WIRE 928 -96 784 -96
WIRE 1376 -96 928 -96
WIRE 1408 -96 1376 -96
WIRE -16 -80 -256 -80
WIRE 464 -48 464 -96
WIRE 544 -48 544 -96
WIRE 624 -48 624 -96
WIRE 704 -48 704 -96
WIRE 784 -48 784 -96
WIRE 928 -48 928 -96
WIRE 128 -16 128 -96
WIRE -336 0 -336 -48
WIRE 144 32 128 32
WIRE -16 64 -16 -80
WIRE 80 64 -16 64
WIRE 128 96 128 80
WIRE 144 96 144 32
WIRE 144 96 128 96
WIRE 464 96 464 16
WIRE 544 96 544 16
WIRE 624 96 624 16
WIRE 704 96 704 16
WIRE 784 96 784 16
WIRE 928 96 928 32
WIRE -1072 112 -1072 -64
WIRE 128 144 128 96
WIRE -736 192 -736 -112
WIRE 1408 208 1408 -96
WIRE 1408 208 1312 208
WIRE -208 256 -208 224
WIRE 1312 272 1312 208
WIRE 1408 272 1408 208
WIRE -1072 288 -1072 192
WIRE -288 304 -448 304
WIRE 320 304 272 304
WIRE 480 304 400 304
WIRE 608 304 544 304
WIRE -64 320 -128 320
WIRE -288 336 -336 336
WIRE 1312 400 1312 336
WIRE 1408 400 1408 352
WIRE 1408 400 1312 400
WIRE -448 416 -448 304
WIRE -208 432 -208 384
WIRE -576 512 -576 400
WIRE 464 528 464 432
WIRE -448 544 -448 416
WIRE -448 544 -512 544
WIRE 64 560 64 512
WIRE 608 560 608 304
WIRE 608 560 528 560
WIRE 992 560 608 560
WIRE 1168 560 992 560
WIRE 1408 560 1408 400
WIRE 1408 560 1168 560
WIRE 1680 560 1408 560
WIRE -736 576 -736 192
WIRE -704 576 -736 576
WIRE 272 592 272 304
WIRE 272 592 160 592
WIRE 304 592 272 592
WIRE 352 592 304 592
WIRE 816 592 816 496
WIRE -240 608 -512 608
WIRE -32 608 -240 608
WIRE 208 624 160 624
WIRE 576 624 528 624
WIRE 592 624 576 624
WIRE 736 624 672 624
WIRE -32 640 -96 640
WIRE 1168 640 1168 560
WIRE 1408 640 1408 560
WIRE 1680 640 1680 560
WIRE 256 656 160 656
WIRE 1168 784 1168 720
WIRE 1408 784 1408 720
WIRE 1680 784 1680 720
WIRE 1184 832 1168 832
WIRE 1424 832 1408 832
WIRE 1696 832 1680 832
WIRE 1120 864 1040 864
WIRE 1360 864 1280 864
WIRE 1632 864 1552 864
WIRE 1168 896 1168 880
WIRE 1184 896 1184 832
WIRE 1184 896 1168 896
WIRE 1408 896 1408 880
WIRE 1424 896 1424 832
WIRE 1424 896 1408 896
WIRE 1680 896 1680 880
WIRE 1696 896 1696 832
WIRE 1696 896 1680 896
WIRE -576 976 -576 640
WIRE 64 976 64 688
WIRE 464 976 464 656
WIRE 816 976 816 656
WIRE 1168 976 1168 896
WIRE 1408 976 1408 896
WIRE 1680 976 1680 896
FLAG 128 144 0
FLAG 928 96 0
FLAG 544 96 0
FLAG 464 96 0
FLAG -1072 -64 vdd
FLAG -1072 288 0
FLAG 128 -512 vdd
FLAG -576 976 0
FLAG -576 400 vdd
FLAG 464 432 vdd
FLAG 464 976 0
FLAG 816 976 0
FLAG 576 624 ref
FLAG 816 496 vdd
FLAG 1168 976 0
FLAG 1408 976 0
FLAG 624 96 0
FLAG 704 96 0
FLAG 784 96 0
FLAG 64 512 vdd
FLAG 992 560 fb
FLAG -736 192 pwm
FLAG 1680 976 0
FLAG 1552 864 0
FLAG 208 624 V1uA
FLAG 304 592 error
FLAG 1376 -96 out
FLAG 176 -96 sw
FLAG -64 320 ref
FLAG -208 432 0
FLAG -336 336 V1uA
FLAG -208 224 vdd
FLAG 448 -496 vdd
FLAG 448 -320 0
FLAG 304 -448 vdd
FLAG 304 -384 rdrop
FLAG 128 -336 rdrop
FLAG 576 -416 cycle_rep
FLAG 64 976 0
FLAG -96 640 rst
FLAG 304 -416 rst
FLAG 256 656 cycle_rep
FLAG -448 416 ramp
FLAG -240 608 control
FLAG -336 -224 vdd
FLAG -336 0 0
FLAG 1280 864 0
FLAG 1040 864 vdd
SYMBOL voltage -1072 96 R0
WINDOW 0 24 96 Left 2
WINDOW 3 -664 60 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL(0 0 1n 1.8 250u 1.8 250.1u 1.9 275u 1.9 275.1u 1.8 300u 1.8 300.1u 1.7 325u 1.7 325.1u 1.8 375u 1.8 375.1u 1.9 400u 1.9 400.1u 1.8 425u 1.8 425.1u 1.7 450u 1.7 450.1u 1.8)
SYMBOL ind2 256 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 0.47µ
SYMATTR SpiceLine Rser=32m
SYMATTR Type ind
SYMBOL cmosp 80 -176 M180
SYMATTR InstName M1
SYMATTR Value2 l=180n w=100u m=500
SYMBOL cmosn 80 -16 R0
SYMATTR InstName M2
SYMATTR Value2 l=180n w=100u m=200
SYMBOL res 1392 256 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL cap 528 -48 R0
SYMATTR InstName C3
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=10m Lser=1n
SYMBOL cap 448 -48 R0
SYMATTR InstName C4
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=10m Lser=1n
SYMBOL Comparator -576 560 M0
SYMATTR InstName X1
SYMBOL Error_Amplifier 448 608 M0
SYMATTR InstName X2
SYMBOL Oscillator -208 320 M0
WINDOW 0 -69 -73 Bottom 2
SYMATTR InstName X3
SYMBOL Bandgap_Reference 832 624 M0
WINDOW 0 -52 -35 Bottom 2
SYMATTR InstName X4
SYMBOL cap 1296 272 R0
SYMATTR InstName C6
SYMATTR Value 30.65p
SYMBOL res 416 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 500k
SYMBOL cap 544 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 12.65p
SYMBOL cmosn 1120 784 R0
SYMATTR InstName M3
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 1360 784 R0
SYMATTR InstName M4
SYMATTR Value2 l=180n w=1u
SYMBOL res 1152 624 R0
SYMATTR InstName R2
SYMATTR Value 50k
SYMBOL res 1392 624 R0
SYMATTR InstName R4
SYMATTR Value 166.66k
SYMBOL cap 608 -48 R0
SYMATTR InstName C1
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=10m Lser=1n
SYMBOL cap 688 -48 R0
SYMATTR InstName C2
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=10m Lser=1n
SYMBOL cap 768 -48 R0
SYMATTR InstName C7
SYMATTR Value 2.2µ
SYMATTR SpiceLine Rser=10m Lser=1n
SYMBOL Soft_Start 64 624 R0
WINDOW 0 82 -71 Bottom 2
SYMATTR InstName X5
SYMBOL cmosn 1632 784 R0
SYMATTR InstName M5
SYMATTR Value2 l=180n w=1u
SYMBOL res 1664 624 R0
SYMATTR InstName R5
SYMATTR Value 71.43k
SYMBOL res 112 -464 R0
SYMATTR InstName R6
SYMATTR Value 10m
SYMBOL Current_Protection 448 -416 R0
WINDOW 0 67 -79 Bottom 2
SYMATTR InstName X6
SYMBOL res 688 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL Dead_Time_Control -352 -112 R0
SYMATTR InstName X7
SYMBOL load2 928 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 25 84 Invisible 2
SYMATTR InstName I1
SYMATTR Value PWL(0 0 50u 1m 350u 1m 350.1u 1 475u 1 475.1u 1m)
TEXT 608 -264 Left 2 !.tran 0.5m
TEXT 608 -288 Left 2 !.include tsmc018.lib
TEXT 168 -144 Left 2 ;Putting 1nH ESL in capacitor makes the loop unstable.
TEXT -360 472 Left 2 ;Ramp Generator & Oscillator
TEXT 488 720 Left 2 ;Error Amplifier
TEXT -720 648 Left 2 ;Comparator
TEXT 936 632 Left 2 ;Bandgap Reference @ 0.5V
TEXT 1104 904 Left 2 ;1.5V
TEXT 1336 904 Left 2 ;0.8V
TEXT 1608 904 Left 2 ;1.2V
TEXT -176 736 Left 2 ;Soft Start Circuit
TEXT 1024 1040 Left 2 ;At 1.5V and 1A output current it automatically gets into PSM mode.
TEXT -1304 24 Left 2 ;For Line Transients
TEXT 576 -456 Left 2 ;Short Circuit Protection (Hicup mode)
TEXT -568 -16 Left 2 ;Dead Time Control
