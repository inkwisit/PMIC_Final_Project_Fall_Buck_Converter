Version 4
SHEET 1 2700 752
WIRE -928 -1360 -1040 -1360
WIRE -704 -1360 -928 -1360
WIRE -384 -1360 -704 -1360
WIRE -96 -1360 -384 -1360
WIRE -64 -1360 -64 -1424
WIRE -64 -1360 -96 -1360
WIRE 336 -1360 -64 -1360
WIRE -1040 -1248 -1040 -1360
WIRE -928 -1248 -928 -1360
WIRE -928 -1248 -960 -1248
WIRE -704 -1248 -704 -1360
WIRE -672 -1248 -704 -1248
WIRE -384 -1248 -384 -1360
WIRE -384 -1248 -416 -1248
WIRE -96 -1248 -96 -1360
WIRE -64 -1248 -96 -1248
WIRE -832 -1232 -880 -1232
WIRE -752 -1232 -832 -1232
WIRE -240 -1232 -336 -1232
WIRE -144 -1232 -240 -1232
WIRE -960 -1200 -960 -1248
WIRE -928 -1200 -960 -1200
WIRE -672 -1200 -672 -1248
WIRE -672 -1200 -704 -1200
WIRE -416 -1200 -416 -1248
WIRE -384 -1200 -416 -1200
WIRE -64 -1200 -64 -1248
WIRE -64 -1200 -96 -1200
WIRE -384 -1136 -384 -1152
WIRE -240 -1136 -240 -1232
WIRE -240 -1136 -384 -1136
WIRE -928 -1104 -928 -1152
WIRE -832 -1104 -832 -1232
WIRE -832 -1104 -928 -1104
WIRE 336 -1008 336 -1360
WIRE 368 -1008 336 -1008
WIRE -96 -992 -96 -1152
WIRE 288 -992 -96 -992
WIRE 368 -960 368 -1008
WIRE 368 -960 336 -960
WIRE -96 -864 -96 -992
WIRE 16 -864 -96 -864
WIRE 144 -864 96 -864
WIRE 336 -864 336 -912
WIRE 336 -864 208 -864
WIRE 336 -816 336 -864
WIRE 544 -816 336 -816
WIRE -384 -768 -384 -1136
WIRE -96 -768 -96 -864
WIRE -352 -720 -384 -720
WIRE -96 -720 -128 -720
WIRE -432 -688 -512 -688
WIRE 32 -688 -48 -688
WIRE -928 -656 -928 -1104
WIRE -1040 -608 -1040 -1168
WIRE -992 -608 -1040 -608
WIRE -704 -576 -704 -1152
WIRE -560 -576 -704 -576
WIRE -384 -576 -384 -672
WIRE -240 -576 -384 -576
WIRE -96 -576 -96 -672
WIRE -96 -576 -240 -576
WIRE -1040 -560 -1040 -608
WIRE -928 -512 -928 -560
WIRE -928 -512 -976 -512
WIRE -704 -512 -704 -576
WIRE -240 -512 -240 -576
WIRE 336 -512 336 -816
WIRE -928 -480 -928 -512
WIRE -704 -464 -736 -464
WIRE -208 -464 -240 -464
WIRE 368 -464 336 -464
WIRE -560 -432 -560 -576
WIRE -560 -432 -656 -432
WIRE -288 -432 -560 -432
WIRE 288 -432 -288 -432
WIRE -736 -416 -736 -464
WIRE -704 -416 -736 -416
WIRE -208 -416 -208 -464
WIRE -208 -416 -240 -416
WIRE 368 -416 368 -464
WIRE 368 -416 336 -416
WIRE -1040 -336 -1040 -464
WIRE -928 -336 -928 -400
WIRE -928 -336 -1040 -336
WIRE -704 -336 -704 -416
WIRE -704 -336 -928 -336
WIRE -352 -336 -352 -720
WIRE -352 -336 -704 -336
WIRE -240 -336 -240 -416
WIRE -240 -336 -352 -336
WIRE -128 -336 -128 -720
WIRE -128 -336 -240 -336
WIRE -64 -336 -128 -336
WIRE 336 -336 336 -416
WIRE 336 -336 -64 -336
WIRE -64 -272 -64 -336
FLAG -64 -1424 VDDA
IOPIN -64 -1424 In
FLAG -64 -272 GNDA
IOPIN -64 -272 Out
FLAG 544 -816 VOUT
IOPIN 544 -816 Out
FLAG -512 -688 VINN
IOPIN -512 -688 In
FLAG 32 -688 VINP
IOPIN 32 -688 In
SYMBOL npn -976 -560 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res -912 -496 M0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL npn -992 -656 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cmosp -880 -1152 R180
SYMATTR InstName M1
SYMATTR Value2 l=180n w=5u
SYMBOL res -1024 -1264 M0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cmosp -752 -1152 M180
SYMATTR InstName M11
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn -656 -512 M0
SYMATTR InstName M12
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn -288 -512 R0
SYMATTR InstName M2
SYMATTR Value2 l=180n w=3u
SYMBOL cmosp -336 -1152 R180
SYMATTR InstName M3
SYMATTR Value2 l=360n w=2u
SYMBOL cmosp -144 -1152 M180
SYMATTR InstName M4
SYMATTR Value2 l=360n w=2u
SYMBOL cmosn -432 -768 R0
SYMATTR InstName M5
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn -48 -768 M0
SYMATTR InstName M6
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 288 -912 M180
SYMATTR InstName M7
SYMATTR Value2 l=180n w=10u
SYMBOL cmosn 288 -512 R0
SYMATTR InstName M8
SYMATTR Value2 l=180n w=3u
SYMBOL cap 208 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 8f
SYMBOL res 112 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 19.569k
TEXT -848 -160 Left 2 ;Fsw = 8MHz, So UGB = 800KHz, So BW of Error Amplifer >> 800KHz. I have taken it Gain cross over frequency of error amplifier to be 8MHz
TEXT -832 -1456 Left 2 !.include tsmc018.lib
TEXT -544 -136 Left 2 ;Required Phase margin is 72 Degrees (Q=0.5, Optimal step response without overshoot)
