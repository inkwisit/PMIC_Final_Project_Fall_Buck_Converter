Version 4
SHEET 1 2700 752
WIRE -48 -496 -160 -496
WIRE 176 -496 -48 -496
WIRE 688 -496 176 -496
WIRE 1040 -496 1040 -560
WIRE 1040 -496 688 -496
WIRE 1200 -496 1040 -496
WIRE 1504 -496 1200 -496
WIRE 1952 -496 1504 -496
WIRE 2384 -496 1952 -496
WIRE -160 -384 -160 -496
WIRE -48 -384 -48 -496
WIRE -48 -384 -80 -384
WIRE 176 -384 176 -496
WIRE 208 -384 176 -384
WIRE 688 -384 688 -496
WIRE 720 -384 688 -384
WIRE 1200 -384 1200 -496
WIRE 1232 -384 1200 -384
WIRE 1952 -384 1952 -496
WIRE 1984 -384 1952 -384
WIRE 2384 -384 2384 -496
WIRE 2416 -384 2384 -384
WIRE 48 -368 0 -368
WIRE 128 -368 48 -368
WIRE 640 -368 128 -368
WIRE 1152 -368 640 -368
WIRE 1904 -368 1152 -368
WIRE 2336 -368 1904 -368
WIRE -80 -336 -80 -384
WIRE -48 -336 -80 -336
WIRE 208 -336 208 -384
WIRE 208 -336 176 -336
WIRE 720 -336 720 -384
WIRE 720 -336 688 -336
WIRE 1232 -336 1232 -384
WIRE 1232 -336 1200 -336
WIRE 1984 -336 1984 -384
WIRE 1984 -336 1952 -336
WIRE 2416 -336 2416 -384
WIRE 2416 -336 2384 -336
WIRE -48 -240 -48 -288
WIRE 48 -240 48 -368
WIRE 48 -240 -48 -240
WIRE 1504 -144 1504 -496
WIRE 544 -112 512 -112
WIRE 688 -112 688 -288
WIRE 688 -112 544 -112
WIRE 832 -112 688 -112
WIRE 864 -112 832 -112
WIRE 464 -96 416 -96
WIRE 960 -96 912 -96
WIRE 1536 -96 1504 -96
WIRE 544 -64 544 -112
WIRE 544 -64 512 -64
WIRE 832 -64 832 -112
WIRE 864 -64 832 -64
WIRE 1200 -64 1200 -288
WIRE 1456 -64 1200 -64
WIRE 1536 -48 1536 -96
WIRE 1536 -48 1504 -48
WIRE 2384 -32 2384 -288
WIRE 2576 -32 2384 -32
WIRE 1360 16 1040 16
WIRE 1616 16 1440 16
WIRE 1952 16 1952 -288
WIRE 1952 16 1680 16
WIRE 1200 80 1200 -64
WIRE 1232 80 1200 80
WIRE 2384 80 2384 -32
WIRE 2416 80 2384 80
WIRE 1200 96 1200 80
WIRE 2384 96 2384 80
WIRE 864 112 864 -16
WIRE 1040 112 1040 16
WIRE 1040 112 864 112
WIRE 1152 112 1040 112
WIRE 1952 112 1952 16
WIRE 2336 112 1952 112
WIRE 512 144 512 -16
WIRE 640 144 512 144
WIRE 1232 144 1232 80
WIRE 1232 144 1200 144
WIRE 2416 144 2416 80
WIRE 2416 144 2384 144
WIRE 512 192 512 144
WIRE 864 192 864 112
WIRE 1952 192 1952 112
WIRE -48 208 -48 -240
WIRE 512 240 480 240
WIRE 896 240 864 240
WIRE 1984 240 1952 240
WIRE -160 256 -160 -304
WIRE -112 256 -160 256
WIRE 640 272 640 144
WIRE 640 272 560 272
WIRE 816 272 640 272
WIRE 1504 272 1504 -48
WIRE 1904 272 1504 272
WIRE 480 288 480 240
WIRE 512 288 480 288
WIRE 896 288 896 240
WIRE 896 288 864 288
WIRE 1984 288 1984 240
WIRE 1984 288 1952 288
WIRE -160 304 -160 256
WIRE 176 320 176 -288
WIRE 288 320 176 320
WIRE -48 352 -48 304
WIRE -48 352 -96 352
WIRE 176 352 176 320
WIRE 1504 352 1504 272
WIRE -48 384 -48 352
WIRE 176 400 144 400
WIRE 1536 400 1504 400
WIRE 288 432 288 320
WIRE 288 432 224 432
WIRE 1456 432 288 432
WIRE 144 448 144 400
WIRE 176 448 144 448
WIRE 1536 448 1536 400
WIRE 1536 448 1504 448
WIRE -160 528 -160 400
WIRE -48 528 -48 464
WIRE -48 528 -160 528
WIRE 176 528 176 448
WIRE 176 528 -48 528
WIRE 512 528 512 288
WIRE 512 528 176 528
WIRE 864 528 864 288
WIRE 864 528 512 528
WIRE 1040 528 864 528
WIRE 1200 528 1200 192
WIRE 1200 528 1040 528
WIRE 1504 528 1504 448
WIRE 1504 528 1200 528
WIRE 1952 528 1952 288
WIRE 1952 528 1504 528
WIRE 2384 528 2384 192
WIRE 2384 528 1952 528
WIRE 1040 592 1040 528
FLAG 416 -96 VINN
IOPIN 416 -96 In
FLAG 960 -96 VINP
IOPIN 960 -96 In
FLAG 1040 -560 VDDA
IOPIN 1040 -560 In
FLAG 1040 592 GNDA
IOPIN 1040 592 Out
FLAG 2576 -32 VOUT
IOPIN 2576 -32 Out
SYMBOL npn -96 304 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res -32 368 M0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL npn -112 208 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cmosp 0 -288 R180
SYMATTR InstName M3
SYMATTR Value2 l=180n w=5u
SYMBOL res -144 -400 M0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL cmosp 640 -288 M180
SYMATTR InstName M4
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 912 -16 R180
SYMATTR InstName M5
SYMATTR Value2 l=180n w=2u
SYMBOL cmosp 464 -16 M180
SYMATTR InstName M6
SYMATTR Value2 l=180n w=2u
SYMBOL cmosn 816 192 R0
SYMATTR InstName M7
SYMATTR Value2 l=360n w=1u
SYMBOL cmosn 560 192 M0
SYMATTR InstName M8
SYMATTR Value2 l=360n w=1u
SYMBOL cmosp 1904 -288 M180
SYMATTR InstName M9
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 2336 192 M180
SYMATTR InstName M2
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 2336 -288 M180
SYMATTR InstName M10
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn 1904 192 R0
SYMATTR InstName M1
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 128 -288 M180
SYMATTR InstName M11
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn 224 352 M0
SYMATTR InstName M12
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 1152 192 M180
SYMATTR InstName M13
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 1152 -288 M180
SYMATTR InstName M14
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn 1456 352 R0
SYMATTR InstName M15
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 1456 -144 R0
SYMATTR InstName M16
SYMATTR Value2 l=180n w=1u
SYMBOL cap 1680 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 20f
SYMBOL res 1456 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 120k
TEXT 256 704 Left 2 ;Fsw = 8MHz, So UGB = 800KHz, So BW of Error Amplifer >> 800KHz. I have taken it Gain cross over frequency of error amplifier to be 8MHz
TEXT 272 -592 Left 2 !.include tsmc018.lib
TEXT 1856 328 Left 2 ;Common Source Stage
TEXT 2272 216 Left 2 ;Common Drain Stage
TEXT 680 288 Left 2 ;P Input stage
TEXT 560 728 Left 2 ;Required Phase margin is 72 Degrees (Q=0.5, Optimal step response without overshoot)
TEXT 1184 216 Left 2 ;Common Drain Stage
