Version 4
SHEET 1 1692 888
WIRE -1056 -352 -1168 -352
WIRE -832 -352 -1056 -352
WIRE -320 -352 -832 -352
WIRE 32 -352 32 -416
WIRE 32 -352 -320 -352
WIRE 496 -352 32 -352
WIRE 944 -352 496 -352
WIRE 1376 -352 944 -352
WIRE -1168 -240 -1168 -352
WIRE -1056 -240 -1056 -352
WIRE -1056 -240 -1088 -240
WIRE -832 -240 -832 -352
WIRE -800 -240 -832 -240
WIRE -320 -240 -320 -352
WIRE -288 -240 -320 -240
WIRE 944 -240 944 -352
WIRE 976 -240 944 -240
WIRE 1376 -240 1376 -352
WIRE 1408 -240 1376 -240
WIRE -960 -224 -1008 -224
WIRE -880 -224 -960 -224
WIRE -368 -224 -880 -224
WIRE 896 -224 -368 -224
WIRE 1328 -224 896 -224
WIRE -1088 -192 -1088 -240
WIRE -1056 -192 -1088 -192
WIRE -800 -192 -800 -240
WIRE -800 -192 -832 -192
WIRE -288 -192 -288 -240
WIRE -288 -192 -320 -192
WIRE 976 -192 976 -240
WIRE 976 -192 944 -192
WIRE 1408 -192 1408 -240
WIRE 1408 -192 1376 -192
WIRE -1056 -96 -1056 -144
WIRE -960 -96 -960 -224
WIRE -960 -96 -1056 -96
WIRE -464 -80 -496 -80
WIRE -320 -80 -320 -144
WIRE -320 -80 -464 -80
WIRE -176 -80 -320 -80
WIRE -144 -80 -176 -80
WIRE -544 -64 -592 -64
WIRE -48 -64 -96 -64
WIRE -464 -32 -464 -80
WIRE -464 -32 -496 -32
WIRE -176 -32 -176 -80
WIRE -144 -32 -176 -32
WIRE 496 64 496 -352
WIRE 528 112 496 112
WIRE 1376 112 1376 -144
WIRE 1568 112 1376 112
WIRE -144 144 -144 16
WIRE 448 144 -144 144
WIRE 528 160 528 112
WIRE 528 160 496 160
WIRE -496 192 -496 16
WIRE -368 192 -496 192
WIRE 1376 224 1376 112
WIRE 1408 224 1376 224
WIRE -496 240 -496 192
WIRE -144 240 -144 144
WIRE 1376 240 1376 224
WIRE 944 256 944 -144
WIRE 1328 256 944 256
WIRE -496 288 -528 288
WIRE -112 288 -144 288
WIRE 1408 288 1408 224
WIRE 1408 288 1376 288
WIRE -368 320 -368 192
WIRE -368 320 -448 320
WIRE -192 320 -368 320
WIRE -528 336 -528 288
WIRE -496 336 -528 336
WIRE -112 336 -112 288
WIRE -112 336 -144 336
WIRE 944 336 944 256
WIRE -1056 352 -1056 -96
WIRE -496 384 -496 336
WIRE -368 384 -496 384
WIRE 976 384 944 384
WIRE -1168 400 -1168 -160
WIRE -1120 400 -1168 400
WIRE 496 416 496 160
WIRE 896 416 496 416
WIRE -496 432 -496 384
WIRE -144 432 -144 336
WIRE 976 432 976 384
WIRE 976 432 944 432
WIRE -1168 448 -1168 400
WIRE -832 464 -832 -144
WIRE -720 464 -832 464
WIRE -496 480 -528 480
WIRE -112 480 -144 480
WIRE -1056 496 -1056 448
WIRE -1056 496 -1104 496
WIRE -832 496 -832 464
WIRE 496 496 496 416
WIRE -368 512 -368 384
WIRE -368 512 -448 512
WIRE -192 512 -368 512
WIRE -1056 528 -1056 496
WIRE -528 528 -528 480
WIRE -496 528 -528 528
WIRE -112 528 -112 480
WIRE -112 528 -144 528
WIRE -832 544 -864 544
WIRE 528 544 496 544
WIRE -720 576 -720 464
WIRE -720 576 -784 576
WIRE 448 576 -720 576
WIRE -864 592 -864 544
WIRE -832 592 -864 592
WIRE 528 592 528 544
WIRE 528 592 496 592
WIRE -1168 672 -1168 544
WIRE -1056 672 -1056 608
WIRE -1056 672 -1168 672
WIRE -832 672 -832 592
WIRE -832 672 -1056 672
WIRE -496 672 -496 528
WIRE -496 672 -832 672
WIRE -144 672 -144 528
WIRE -144 672 -496 672
WIRE 32 672 -144 672
WIRE 496 672 496 592
WIRE 496 672 32 672
WIRE 944 672 944 432
WIRE 944 672 496 672
WIRE 1376 672 1376 336
WIRE 1376 672 944 672
WIRE 32 736 32 672
FLAG -592 -64 VINN
IOPIN -592 -64 In
FLAG -48 -64 VINP
IOPIN -48 -64 In
FLAG 32 -416 VDDA
IOPIN 32 -416 In
FLAG 32 736 GNDA
IOPIN 32 736 Out
FLAG 1568 112 VOUT
IOPIN 1568 112 Out
SYMBOL npn -1104 448 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res -1040 512 M0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL npn -1120 352 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cmosp -1008 -144 R180
SYMATTR InstName M1
SYMATTR Value2 l=180n w=5u
SYMBOL res -1152 -256 M0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL cmosp -368 -144 M180
SYMATTR InstName M2
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp -96 16 R180
SYMATTR InstName M3
SYMATTR Value2 l=180n w=2u
SYMBOL cmosp -544 16 M180
SYMATTR InstName M4
SYMATTR Value2 l=180n w=2u
SYMBOL cmosn -192 240 R0
SYMATTR InstName M5
SYMATTR Value2 l=360n w=1u
SYMBOL cmosn -448 240 M0
SYMATTR InstName M6
SYMATTR Value2 l=360n w=1u
SYMBOL cmosp 896 -144 M180
SYMATTR InstName M7
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 1328 336 M180
SYMATTR InstName M8
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 1328 -144 M180
SYMATTR InstName M9
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn 896 336 R0
SYMATTR InstName M10
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp -880 -144 M180
SYMATTR InstName M11
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn -784 496 M0
SYMATTR InstName M12
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 448 496 R0
SYMATTR InstName M15
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 448 64 R0
SYMATTR InstName M16
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn -192 432 R0
SYMATTR InstName M13
SYMATTR Value2 l=360n w=1u
SYMBOL cmosn -448 432 M0
SYMATTR InstName M14
SYMATTR Value2 l=360n w=1u
TEXT -752 848 Left 2 ;Fsw = 8MHz, So UGB = 800KHz, So BW of Error Amplifer >> 800KHz. I have taken it Gain cross over frequency of error amplifier to be 8MHz
TEXT -736 -448 Left 2 !.include tsmc018.lib
TEXT 848 472 Left 2 ;Common Source Stage
TEXT 1264 360 Left 2 ;Common Drain Stage
TEXT -328 336 Left 2 ;P Input stage
TEXT -448 872 Left 2 ;Required Phase margin is 72 Degrees (Q=0.5, Optimal step response without overshoot)
TEXT -328 528 Left 2 ;P Input stage
