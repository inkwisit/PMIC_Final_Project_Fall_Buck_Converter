* C:\Users\subha\OneDrive\Documents\GitHub\PMIC_Final_Project_Fall_Buck_Converter\tb_error_amplifier_ac.asc
XX1 N001 N002 N003 0 vout error_amplifier
V1 N001 0 1.8
<<<<<<< HEAD
V3 N003 0 0.8 AC 1
V2 N002 0 0.8
C1 vout 0 2f

* block symbol definitions
.subckt error_amplifier VDDA VINN VINP GNDA VOUT
Q1 N009 N011 GNDA 0 2N3904
R1 N011 GNDA 1Meg
Q2 N001 N009 N011 0 2N3904
M3 N001 N001 VDDA VDDA CMOSP l=180n w=5u
R2 VDDA N009 1Meg
M4 N002 N001 VDDA VDDA CMOSP l=180n w=5u
M5 N005 VINP N002 N002 CMOSP l=180n w=1.35u
M6 N008 VINN N002 N002 CMOSP l=180n w=1.35u
M7 N005 N008 GNDA GNDA CMOSN l=360n w=1u
M8 N008 N008 GNDA GNDA CMOSN l=360n w=1u
M9 N007 N001 VDDA VDDA CMOSP l=180n w=5u
M2 GNDA N007 VOUT VOUT CMOSP l=180n w=5u
M10 VOUT N001 VDDA VDDA CMOSP l=180n w=5u
M1 N007 N003 GNDA GNDA CMOSN l=180n w=1u
M11 N010 N001 VDDA VDDA CMOSP l=180n w=5u
M12 N010 N010 GNDA GNDA CMOSN l=180n w=1u
M13 GNDA N005 N004 N004 CMOSP l=180n w=5u
M14 N004 N001 VDDA VDDA CMOSP l=180n w=5u
M15 N003 N010 GNDA GNDA CMOSN l=180n w=1u
M16 VDDA N004 N003 N003 CMOSN l=180n w=1u
C1 N007 N006 10f
R3 N006 N005 30k
=======
V3 N003 0 {Vdc} AC 1
C1 vout 0 1.6f
V2 N002 0 {Vdc}

* block symbol definitions
.subckt error_amplifier VDDA VINN VINP GNDA VOUT
Q1 N005 N008 GNDA 0 2N3904
R1 N008 GNDA 150k
Q2 N001 N005 N008 0 2N3904
M1 N001 N001 VDDA VDDA CMOSP l=180n w=5u
R2 VDDA N005 150k
M11 N006 N001 VDDA VDDA CMOSP l=180n w=5u
M12 N006 N006 GNDA GNDA CMOSN l=180n w=1u
M2 N007 N006 GNDA GNDA CMOSN l=180n w=2u
M3 N002 N002 VDDA VDDA CMOSP l=360n w=2u
M4 N003 N002 VDDA VDDA CMOSP l=360n w=2u
M5 N002 VINN N007 GNDA CMOSN l=180n w=1u
M6 N003 VINP N007 GNDA CMOSN l=180n w=1u
M7 VOUT N003 VDDA VDDA CMOSP l=180n w=10u
M8 VOUT N006 GNDA GNDA CMOSN l=180n w=2u
C1 VOUT N004 8f
R3 N004 N003 19.569k
>>>>>>> Error_Amplifier
.include tsmc018.lib
.ends error_amplifier

.model NPN NPN
.model PNP PNP
.lib C:\Users\subha\OneDrive\Documents\LTspiceXVII\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\subha\OneDrive\Documents\LTspiceXVII\lib\cmp\standard.mos
.op
.ac dec 20 100 1G
;step param Vdc 0.5 1 0.05
.meas AC Loop_Gain_Angle FIND V(Vout) WHEN mag(V(Vout))=1
.meas AC Gain_Margin FIND V(Vout) WHEN Ph(V(Vout))=pi
.param Vdc 0.8
.backanno
.end
