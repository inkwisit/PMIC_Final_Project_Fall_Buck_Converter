Version 4
SHEET 1 5076 744
WIRE 288 -336 176 -336
WIRE 464 -336 288 -336
WIRE 640 -336 464 -336
WIRE 864 -336 864 -400
WIRE 864 -336 640 -336
WIRE 1024 -336 864 -336
WIRE 1328 -336 1024 -336
WIRE 1600 -336 1328 -336
WIRE 176 -128 176 -336
WIRE 288 -128 288 -336
WIRE 288 -128 256 -128
WIRE 464 -128 464 -336
WIRE 496 -128 464 -128
WIRE 640 -128 640 -336
WIRE 640 -128 608 -128
WIRE 1024 -128 1024 -336
WIRE 1056 -128 1024 -128
WIRE 1328 -128 1328 -336
WIRE 1360 -128 1328 -128
WIRE 1600 -128 1600 -336
WIRE 1632 -128 1600 -128
WIRE 384 -112 336 -112
WIRE 416 -112 384 -112
WIRE 832 -112 688 -112
WIRE 976 -112 832 -112
WIRE 1280 -112 1168 -112
WIRE 1552 -112 1280 -112
WIRE 256 -80 256 -128
WIRE 288 -80 256 -80
WIRE 496 -80 496 -128
WIRE 496 -80 464 -80
WIRE 608 -80 608 -128
WIRE 640 -80 608 -80
WIRE 1056 -80 1056 -128
WIRE 1056 -80 1024 -80
WIRE 1360 -80 1360 -128
WIRE 1360 -80 1328 -80
WIRE 1632 -80 1632 -128
WIRE 1632 -80 1600 -80
WIRE 1328 -16 1328 -32
WIRE 1392 -16 1328 -16
WIRE 1424 -16 1392 -16
WIRE 288 0 288 -32
WIRE 384 0 384 -112
WIRE 384 0 288 0
WIRE 640 0 640 -32
WIRE 832 0 832 -112
WIRE 832 0 640 0
WIRE 1024 0 1024 -32
WIRE 1168 0 1168 -112
WIRE 1168 0 1024 0
WIRE 1328 0 1328 -16
WIRE 640 32 640 0
WIRE 1968 32 1824 32
WIRE 2224 48 2032 48
WIRE 1920 64 1872 64
WIRE 1968 64 1920 64
WIRE 2224 64 2224 48
WIRE 2272 64 2224 64
WIRE 2480 64 2368 64
WIRE 640 80 608 80
WIRE 1328 112 1328 80
WIRE 1328 112 688 112
WIRE 2272 112 2224 112
WIRE 608 128 608 80
WIRE 640 128 608 128
WIRE 1024 128 1024 0
WIRE 1920 144 1872 144
WIRE 1968 144 1920 144
WIRE 2224 160 2224 112
WIRE 2224 160 2032 160
WIRE 1024 176 992 176
WIRE 1600 176 1600 -32
WIRE 1696 176 1696 80
WIRE 1696 176 1600 176
WIRE 1776 176 1696 176
WIRE 1824 176 1824 32
WIRE 1824 176 1776 176
WIRE 1968 176 1824 176
WIRE 1168 208 1072 208
WIRE 1328 208 1328 112
WIRE 1392 208 1328 208
WIRE 1424 208 1392 208
WIRE 288 224 288 0
WIRE 992 224 992 176
WIRE 1024 224 992 224
WIRE 1600 224 1600 176
WIRE 176 272 176 -48
WIRE 224 272 176 272
WIRE 1328 288 1328 208
WIRE 1824 288 1824 176
WIRE 640 304 640 128
WIRE 832 304 640 304
WIRE 1024 304 1024 224
WIRE 1024 304 832 304
WIRE 2480 304 2480 64
WIRE 2480 304 1872 304
WIRE 176 320 176 272
WIRE 464 336 464 -32
WIRE 576 336 464 336
WIRE 464 352 464 336
WIRE 832 352 832 304
WIRE 288 368 288 320
WIRE 288 368 240 368
WIRE 288 400 288 368
WIRE 464 400 448 400
WIRE 848 400 832 400
WIRE 576 432 576 336
WIRE 576 432 512 432
WIRE 656 432 576 432
WIRE 784 432 656 432
WIRE 448 448 448 400
WIRE 464 448 448 448
WIRE 848 448 848 400
WIRE 848 448 832 448
WIRE 176 544 176 416
WIRE 288 544 288 480
WIRE 288 544 176 544
WIRE 464 544 464 448
WIRE 464 544 288 544
WIRE 832 544 832 448
WIRE 832 544 464 544
WIRE 880 544 832 544
WIRE 1328 544 1328 368
WIRE 1328 544 880 544
WIRE 1600 544 1600 288
WIRE 1600 544 1328 544
WIRE 1824 544 1824 368
WIRE 1824 544 1600 544
WIRE 880 608 880 544
FLAG 1168 208 vref
IOPIN 1168 208 In
FLAG 864 -400 VDDA
IOPIN 864 -400 In
FLAG 880 608 GNDA
IOPIN 880 608 In
FLAG 1392 -16 1v5
FLAG 1392 208 0v5
FLAG 656 432 vbn0
FLAG 1776 176 vramp
FLAG 1872 352 0
FLAG 1920 144 0v5
FLAG 1920 64 1v5
FLAG 1696 80 VOUT
IOPIN 1696 80 Out
SYMBOL cmosp 976 -32 M180
SYMATTR InstName M1
SYMATTR Value2 l=360n w=2.5u
SYMBOL cmosp 688 -32 R180
SYMATTR InstName M2
SYMATTR Value2 l=360n w=2.5u
SYMBOL cmosn 1072 128 M0
SYMATTR InstName M3
SYMATTR Value2 l=360n w=500n
SYMBOL cmosn 688 32 M0
SYMATTR InstName M4
SYMATTR Value2 l=360n w=500n
SYMBOL cmosn 784 352 R0
SYMATTR InstName M5
SYMATTR Value2 l=720n w=2u
SYMBOL cmosp 512 352 M0
SYMATTR InstName M6
SYMATTR Value2 l=720n w=2u
SYMBOL cmosp 416 -32 M180
SYMATTR InstName M7
SYMATTR Value2 l=360n w=2.5u
SYMBOL npn 240 320 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res 304 384 M0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL npn 224 224 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cmosp 336 -32 R180
SYMATTR InstName M8
SYMATTR Value2 l=360n w=2.5u
SYMBOL res 192 -144 M0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL cmosp 1280 -32 M180
SYMATTR InstName M9
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 1552 -32 M180
SYMATTR InstName M10
SYMATTR Value2 l=180n w=1u
SYMBOL cap 1584 224 R0
SYMATTR InstName C1
SYMATTR Value 1p
SYMBOL res 1312 -16 R0
SYMATTR InstName R3
SYMATTR Value 1Meg
SYMBOL res 1312 272 R0
SYMATTR InstName R4
SYMATTR Value 500k
SYMBOL sw 1824 384 R180
SYMATTR InstName S1
SYMATTR Value Discharge
SYMBOL Digital\\diffschmtbuf 1968 -16 R0
WINDOW 3 8 44 Left 2
SYMATTR InstName A2
SYMATTR Value Vhigh=1.8, Vlow=0, Vt=0
SYMBOL Digital\\diffschmtbuf 1968 96 R0
WINDOW 3 8 44 Left 2
SYMATTR InstName A1
SYMATTR Value Vhigh=1.8, Vlow=0, Vt=0
SYMBOL Digital\\srflop 2320 16 R0
WINDOW 3 -40 28 Left 2
SYMATTR InstName A3
SYMATTR Value Vhigh=1.8, Vlow=0
TEXT 656 272 Left 2 ;Single Stage High Gain amplifier
TEXT 312 -384 Left 2 !.include tsmc018.lib
TEXT 1688 -320 Left 2 ;PMOS width = 8u, Length = 180n
TEXT 1688 -288 Left 2 ;approx voltage swing =1 V
TEXT 1688 -256 Left 2 ;Target Frequency = 8M, Time = 125n
TEXT 1688 -224 Left 2 ;Calculated capacitor = 1p
TEXT 976 584 Left 2 ;There is also a need of 0.5V from bandgap reference.
TEXT 320 728 Left 2 ;If the vref comes from bandgap reference, this can be a temperature compensated osc. (constant current operation)
TEXT 312 -408 Left 2 !.model Discharge sw(Ron=1m)
