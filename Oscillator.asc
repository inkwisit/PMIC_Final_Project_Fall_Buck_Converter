Version 4
SHEET 1 6116 744
WIRE 288 -336 176 -336
WIRE 464 -336 288 -336
WIRE 640 -336 464 -336
WIRE 864 -336 864 -400
WIRE 864 -336 640 -336
WIRE 1024 -336 864 -336
WIRE 1328 -336 1024 -336
WIRE 1488 -336 1328 -336
WIRE 1600 -336 1488 -336
WIRE 2320 -336 1600 -336
WIRE 2624 -336 2320 -336
WIRE 3008 -336 2624 -336
WIRE 3360 -336 3008 -336
WIRE 3744 -336 3360 -336
WIRE 4240 -336 3744 -336
WIRE 4832 -336 4240 -336
WIRE 2624 -224 2624 -336
WIRE 2624 -224 2592 -224
WIRE 3008 -224 3008 -336
WIRE 3040 -224 3008 -224
WIRE 3360 -224 3360 -336
WIRE 3360 -224 3328 -224
WIRE 3744 -224 3744 -336
WIRE 3776 -224 3744 -224
WIRE 2816 -208 2672 -208
WIRE 2960 -208 2816 -208
WIRE 3552 -208 3408 -208
WIRE 3696 -208 3552 -208
WIRE 4240 -192 4240 -336
WIRE 4272 -192 4240 -192
WIRE 4832 -192 4832 -336
WIRE 4832 -192 4800 -192
WIRE 2592 -176 2592 -224
WIRE 2624 -176 2592 -176
WIRE 3040 -176 3040 -224
WIRE 3040 -176 3008 -176
WIRE 3328 -176 3328 -224
WIRE 3360 -176 3328 -176
WIRE 3776 -176 3776 -224
WIRE 3776 -176 3744 -176
WIRE 4192 -176 4000 -176
WIRE 5072 -176 4880 -176
WIRE 4272 -144 4272 -192
WIRE 4272 -144 4240 -144
WIRE 4800 -144 4800 -192
WIRE 4832 -144 4800 -144
WIRE 176 -128 176 -336
WIRE 288 -128 288 -336
WIRE 288 -128 256 -128
WIRE 464 -128 464 -336
WIRE 496 -128 464 -128
WIRE 640 -128 640 -336
WIRE 640 -128 608 -128
WIRE 1024 -128 1024 -336
WIRE 1056 -128 1024 -128
WIRE 1328 -128 1328 -336
WIRE 1360 -128 1328 -128
WIRE 1600 -128 1600 -336
WIRE 1632 -128 1600 -128
WIRE 2320 -128 2320 -336
WIRE 2352 -128 2320 -128
WIRE 352 -112 336 -112
WIRE 384 -112 352 -112
WIRE 416 -112 384 -112
WIRE 832 -112 688 -112
WIRE 976 -112 832 -112
WIRE 1280 -112 1168 -112
WIRE 1424 -112 1280 -112
WIRE 1552 -112 1504 -112
WIRE 2272 -112 1552 -112
WIRE 2624 -112 2624 -128
WIRE 2816 -112 2816 -208
WIRE 2816 -112 2624 -112
WIRE 3360 -112 3360 -128
WIRE 3552 -112 3552 -208
WIRE 3552 -112 3360 -112
WIRE 256 -80 256 -128
WIRE 288 -80 256 -80
WIRE 496 -80 496 -128
WIRE 496 -80 464 -80
WIRE 608 -80 608 -128
WIRE 640 -80 608 -80
WIRE 1056 -80 1056 -128
WIRE 1056 -80 1024 -80
WIRE 1360 -80 1360 -128
WIRE 1360 -80 1328 -80
WIRE 1632 -80 1632 -128
WIRE 1632 -80 1600 -80
WIRE 2352 -80 2352 -128
WIRE 2352 -80 2320 -80
WIRE 1328 -16 1328 -32
WIRE 1392 -16 1328 -16
WIRE 4240 -16 4240 -96
WIRE 4240 -16 4208 -16
WIRE 4832 -16 4832 -96
WIRE 4864 -16 4832 -16
WIRE 288 0 288 -32
WIRE 384 0 384 -112
WIRE 384 0 288 0
WIRE 640 0 640 -32
WIRE 832 0 832 -112
WIRE 832 0 640 0
WIRE 1024 0 1024 -32
WIRE 1168 0 1168 -112
WIRE 1168 0 1024 0
WIRE 1328 0 1328 -16
WIRE 3008 0 3008 -128
WIRE 3072 0 3008 0
WIRE 3744 0 3744 -128
WIRE 3808 0 3744 0
WIRE 4448 0 4288 0
WIRE 4784 0 4624 0
WIRE 640 32 640 0
WIRE 4208 32 4208 -16
WIRE 4240 32 4208 32
WIRE 4864 32 4864 -16
WIRE 4864 32 4832 32
WIRE 640 80 608 80
WIRE 1600 80 1600 -32
WIRE 1696 80 1696 -16
WIRE 1696 80 1600 80
WIRE 1824 80 1696 80
WIRE 1904 80 1824 80
WIRE 2016 80 1904 80
WIRE 1328 112 1328 80
WIRE 1328 112 688 112
WIRE 608 128 608 80
WIRE 640 128 608 128
WIRE 1024 128 1024 0
WIRE 2320 128 2320 -32
WIRE 2320 128 2208 128
WIRE 2624 128 2624 -112
WIRE 3008 128 3008 0
WIRE 3360 128 3360 -112
WIRE 3744 128 3744 0
WIRE 4448 128 4448 0
WIRE 4832 128 4832 80
WIRE 4832 128 4448 128
WIRE 4240 144 4240 80
WIRE 4400 144 4240 144
WIRE 4624 144 4624 0
WIRE 4624 144 4400 144
WIRE 1328 160 1328 112
WIRE 4240 160 4240 144
WIRE 4240 160 4112 160
WIRE 4336 160 4240 160
WIRE 4832 160 4832 128
WIRE 4832 160 4736 160
WIRE 4960 160 4832 160
WIRE 4992 160 4960 160
WIRE 5024 160 4992 160
WIRE 1024 176 992 176
WIRE 2656 176 2624 176
WIRE 3008 176 2976 176
WIRE 3392 176 3360 176
WIRE 3744 176 3712 176
WIRE 1824 192 1824 80
WIRE 2320 192 2320 128
WIRE 1168 208 1072 208
WIRE 2512 208 2480 208
WIRE 2576 208 2512 208
WIRE 3104 208 3056 208
WIRE 3152 208 3104 208
WIRE 3248 208 3216 208
WIRE 3312 208 3248 208
WIRE 3840 208 3792 208
WIRE 3888 208 3840 208
WIRE 288 224 288 0
WIRE 992 224 992 176
WIRE 1024 224 992 224
WIRE 1600 224 1600 80
WIRE 2656 224 2656 176
WIRE 2656 224 2624 224
WIRE 2976 224 2976 176
WIRE 3008 224 2976 224
WIRE 3392 224 3392 176
WIRE 3392 224 3360 224
WIRE 3712 224 3712 176
WIRE 3744 224 3712 224
WIRE 4112 224 4112 160
WIRE 4336 224 4336 160
WIRE 4736 224 4736 160
WIRE 4960 224 4960 160
WIRE 1824 240 1792 240
WIRE 2336 240 2320 240
WIRE 176 272 176 -48
WIRE 224 272 176 272
WIRE 1968 272 1872 272
WIRE 2064 272 1968 272
WIRE 2208 272 2208 128
WIRE 2208 272 2144 272
WIRE 2272 272 2208 272
WIRE 4128 272 4112 272
WIRE 4336 272 4320 272
WIRE 4752 272 4736 272
WIRE 4960 272 4944 272
WIRE 1792 288 1792 240
WIRE 1824 288 1792 288
WIRE 2336 288 2336 240
WIRE 2336 288 2320 288
WIRE 640 304 640 128
WIRE 832 304 640 304
WIRE 1024 304 1024 224
WIRE 1024 304 832 304
WIRE 1328 304 1328 240
WIRE 1376 304 1328 304
WIRE 2624 304 2624 224
WIRE 2816 304 2624 304
WIRE 3008 304 3008 224
WIRE 3008 304 2816 304
WIRE 3360 304 3360 224
WIRE 3552 304 3360 304
WIRE 3744 304 3744 224
WIRE 3744 304 3552 304
WIRE 4000 304 4000 -176
WIRE 4000 304 3952 304
WIRE 4064 304 4000 304
WIRE 4448 304 4448 128
WIRE 4448 304 4384 304
WIRE 4624 304 4624 144
WIRE 4688 304 4624 304
WIRE 5072 304 5072 -176
WIRE 5072 304 5008 304
WIRE 5120 304 5072 304
WIRE 176 320 176 272
WIRE 4128 320 4128 272
WIRE 4128 320 4112 320
WIRE 4320 320 4320 272
WIRE 4336 320 4320 320
WIRE 4752 320 4752 272
WIRE 4752 320 4736 320
WIRE 4944 320 4944 272
WIRE 4960 320 4944 320
WIRE 464 336 464 -32
WIRE 576 336 464 336
WIRE 464 352 464 336
WIRE 832 352 832 304
WIRE 1968 352 1968 272
WIRE 2816 352 2816 304
WIRE 3552 352 3552 304
WIRE 288 368 288 320
WIRE 288 368 240 368
WIRE 1328 368 1328 304
WIRE 288 400 288 368
WIRE 464 400 448 400
WIRE 848 400 832 400
WIRE 1968 400 1952 400
WIRE 2832 400 2816 400
WIRE 3568 400 3552 400
WIRE 576 432 576 336
WIRE 576 432 512 432
WIRE 656 432 576 432
WIRE 784 432 656 432
WIRE 2112 432 2016 432
WIRE 2144 432 2112 432
WIRE 2704 432 2672 432
WIRE 2768 432 2704 432
WIRE 3440 432 3408 432
WIRE 3504 432 3440 432
WIRE 448 448 448 400
WIRE 464 448 448 448
WIRE 848 448 848 400
WIRE 848 448 832 448
WIRE 1952 448 1952 400
WIRE 1968 448 1952 448
WIRE 2832 448 2832 400
WIRE 2832 448 2816 448
WIRE 3568 448 3568 400
WIRE 3568 448 3552 448
WIRE 176 544 176 416
WIRE 288 544 288 480
WIRE 288 544 176 544
WIRE 464 544 464 448
WIRE 464 544 288 544
WIRE 832 544 832 448
WIRE 832 544 464 544
WIRE 880 544 832 544
WIRE 1328 544 1328 448
WIRE 1328 544 880 544
WIRE 1600 544 1600 288
WIRE 1600 544 1328 544
WIRE 1824 544 1824 288
WIRE 1824 544 1600 544
WIRE 1968 544 1968 448
WIRE 1968 544 1824 544
WIRE 2192 544 1968 544
WIRE 2320 544 2320 288
WIRE 2320 544 2192 544
WIRE 2816 544 2816 448
WIRE 2816 544 2320 544
WIRE 3552 544 3552 448
WIRE 3552 544 2816 544
WIRE 4112 544 4112 320
WIRE 4112 544 3552 544
WIRE 4336 544 4336 320
WIRE 4336 544 4112 544
WIRE 4736 544 4736 320
WIRE 4736 544 4336 544
WIRE 4944 544 4944 320
WIRE 4944 544 4736 544
WIRE 880 608 880 544
FLAG 1168 208 vref
IOPIN 1168 208 In
FLAG 864 -400 VDDA
IOPIN 864 -400 In
FLAG 880 608 GNDA
IOPIN 880 608 In
FLAG 1392 -16 1v3
FLAG 656 432 vbn0
FLAG 1696 -16 VOUT
IOPIN 1696 -16 Out
FLAG 1488 -336 vdda
FLAG 4992 160 Q
FLAG 3952 304 S
FLAG 5120 304 R
FLAG 4400 144 Q_b
FLAG 1904 80 VOUT
FLAG 352 -112 vbp0
FLAG 2192 544 gnda
FLAG 3104 208 1v3
FLAG 2512 208 VOUT
FLAG 3072 0 S
FLAG 2704 432 vbn0
FLAG 3840 208 VOUT
FLAG 3248 208 0v5
FLAG 3808 0 R
FLAG 3440 432 vbn0
FLAG 2112 432 Q_b
FLAG 1376 304 0v5
SYMBOL cmosp 976 -32 M180
SYMATTR InstName M1
SYMATTR Value2 l=360n w=2.5u
SYMBOL cmosp 688 -32 R180
SYMATTR InstName M2
SYMATTR Value2 l=360n w=2.5u
SYMBOL cmosn 1072 128 M0
SYMATTR InstName M3
SYMATTR Value2 l=360n w=500n
SYMBOL cmosn 688 32 M0
SYMATTR InstName M4
SYMATTR Value2 l=360n w=500n
SYMBOL cmosn 784 352 R0
SYMATTR InstName M5
SYMATTR Value2 l=720n w=2u
SYMBOL cmosp 416 -32 M180
SYMATTR InstName M7
SYMATTR Value2 l=360n w=2.5u
SYMBOL npn 240 320 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res 304 384 M0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL npn 224 224 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cmosp 336 -32 R180
SYMATTR InstName M8
SYMATTR Value2 l=360n w=2.5u
SYMBOL res 192 -144 M0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL cmosp 1280 -32 M180
SYMATTR InstName M9
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 1552 -32 M180
SYMATTR InstName M10
SYMATTR Value2 l=180n w=1.1u
SYMBOL cap 1584 224 R0
SYMATTR InstName C1
SYMATTR Value 0.115p
SYMBOL res 1312 -16 R0
SYMATTR InstName R3
SYMATTR Value 500k
SYMBOL cmosn 1872 192 M0
SYMATTR InstName M11
SYMATTR Value2 l=180n w=2.2u
SYMBOL cmosn 4064 224 R0
SYMATTR InstName M12
SYMATTR Value2 l=180n w=270n
SYMBOL cmosn 4384 224 M0
SYMATTR InstName M13
SYMATTR Value2 l=180n w=270n
SYMBOL cmosp 4192 -96 M180
SYMATTR InstName M14
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 4288 80 R180
SYMATTR InstName M15
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 5008 224 M0
SYMATTR InstName M16
SYMATTR Value2 l=180n w=270n
SYMBOL cmosn 4688 224 R0
SYMATTR InstName M17
SYMATTR Value2 l=180n w=270n
SYMBOL cmosp 4880 -96 R180
SYMATTR InstName M18
SYMATTR Value2 l=180n w=270n
SYMBOL cmosp 4784 80 M180
SYMATTR InstName M19
SYMATTR Value2 l=180n w=270n
SYMBOL cmosp 2960 -128 M180
SYMATTR InstName M20
SYMATTR Value2 l=180n w=5u
SYMBOL cmosp 2672 -128 R180
SYMATTR InstName M21
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn 3056 128 M0
SYMATTR InstName M22
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 2576 128 R0
SYMATTR InstName M23
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 2768 352 R0
SYMATTR InstName M24
SYMATTR Value2 l=720n w=2u
SYMBOL cmosp 3696 -128 M180
SYMATTR InstName M25
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 3408 -128 R180
SYMATTR InstName M26
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 3792 128 M0
SYMATTR InstName M27
SYMATTR Value2 l=180n w=270n
SYMBOL cmosn 3312 128 R0
SYMATTR InstName M28
SYMATTR Value2 l=180n w=270n
SYMBOL cmosn 3504 352 R0
SYMATTR InstName M29
SYMATTR Value2 l=720n w=2u
SYMBOL cmosp 2272 -32 M180
SYMATTR InstName M30
SYMATTR Value2 l=180n w=11u
SYMBOL res 2160 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL cmosn 2272 192 R0
SYMATTR InstName M31
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 2016 352 M0
SYMATTR InstName M32
SYMATTR Value2 l=180n w=270n
SYMBOL res 1520 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL cmosn 512 352 M0
SYMATTR InstName M33
SYMATTR Value2 l=720n w=2u
SYMBOL res 1312 352 R0
SYMATTR InstName R4
SYMATTR Value 500k
SYMBOL res 1312 144 R0
SYMATTR InstName R7
SYMATTR Value 300k
TEXT 656 272 Left 2 ;Single Stage High Gain amplifier
TEXT 312 -384 Left 2 !.include tsmc018.lib
TEXT 2608 -464 Left 2 ;PMOS width = 8u, Length = 180n
TEXT 2608 -432 Left 2 ;Approx voltage swing =1 V
TEXT 2608 -400 Left 2 ;Target Frequency = 8M, Time = 125n
TEXT 2608 -496 Left 2 ;Capacitor and current combination for 1V swing = 0.125p & 1uA
TEXT 976 584 Left 2 ;There is also a need of 0.5V from bandgap reference.
TEXT 1136 -400 Left 2 ;If the vref comes from bandgap reference, this can be a temperature compensated osc. (constant current operation)
TEXT 312 -408 Left 2 !;model Discharge sw(Ron=1, Roff=30MEG, Vt=0.5)
TEXT 2640 280 Left 2 ;Single Stage High Gain amplifier
TEXT 3384 272 Left 2 ;Single Stage High Gain amplifier
TEXT 2104 576 Left 2 ;Potential Research topic to reduce the delay for detection (Using a high slope ramp down)
TEXT 1248 -176 Left 2 ;This Resistor is reducing the back flow of ripples
TEXT 1352 112 Left 2 ;Expecting 0.8V Vref
TEXT 1408 328 Left 2 ;Ideally should be 0.125p for 1u current
