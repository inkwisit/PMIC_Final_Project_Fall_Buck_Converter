Version 4
SHEET 1 1636 1380
WIRE -896 -400 -1232 -400
WIRE -784 -400 -896 -400
WIRE -560 -400 -784 -400
WIRE -16 -400 -560 -400
WIRE 272 -400 -16 -400
WIRE 704 -400 272 -400
WIRE 1136 -400 704 -400
WIRE -896 -288 -896 -400
WIRE -784 -288 -784 -400
WIRE -784 -288 -816 -288
WIRE -560 -288 -560 -400
WIRE -528 -288 -560 -288
WIRE 1136 -288 1136 -400
WIRE 1168 -288 1136 -288
WIRE -688 -272 -736 -272
WIRE -608 -272 -688 -272
WIRE 1088 -272 -608 -272
WIRE -816 -240 -816 -288
WIRE -784 -240 -816 -240
WIRE -528 -240 -528 -288
WIRE -528 -240 -560 -240
WIRE 1168 -240 1168 -288
WIRE 1168 -240 1136 -240
WIRE -16 -192 -16 -400
WIRE -16 -192 -48 -192
WIRE 272 -192 272 -400
WIRE 304 -192 272 -192
WIRE 128 -176 32 -176
WIRE 224 -176 128 -176
WIRE -784 -144 -784 -192
WIRE -688 -144 -688 -272
WIRE -688 -144 -784 -144
WIRE -48 -144 -48 -192
WIRE -16 -144 -48 -144
WIRE 304 -144 304 -192
WIRE 304 -144 272 -144
WIRE -16 -80 -16 -96
WIRE 128 -80 128 -176
WIRE 128 -80 -16 -80
WIRE 704 -48 704 -400
WIRE 736 -48 704 -48
WIRE 272 -32 272 -96
WIRE 656 -32 272 -32
WIRE 736 0 736 -48
WIRE 736 0 704 0
WIRE -1232 32 -1232 -400
WIRE 1136 80 1136 -192
WIRE 1136 80 -176 80
WIRE 1136 160 1136 80
WIRE 1168 160 1136 160
WIRE 704 176 704 48
WIRE 1088 176 704 176
WIRE -1232 192 -1232 112
WIRE -16 192 -16 -80
WIRE 272 192 272 -32
WIRE 1168 208 1168 160
WIRE 1168 208 1136 208
WIRE 16 240 -16 240
WIRE 272 240 240 240
WIRE -176 272 -176 80
WIRE -64 272 -176 272
WIRE 496 272 320 272
WIRE -784 304 -784 -144
WIRE 496 336 496 272
WIRE -896 352 -896 -208
WIRE -848 352 -896 352
WIRE -560 384 -560 -192
WIRE -416 384 -560 384
WIRE -16 384 -16 288
WIRE 128 384 -16 384
WIRE 272 384 272 288
WIRE 272 384 128 384
WIRE -896 400 -896 352
WIRE -784 448 -784 400
WIRE -784 448 -832 448
WIRE -560 448 -560 384
WIRE 128 448 128 384
WIRE 704 448 704 176
WIRE -784 480 -784 448
WIRE -560 496 -592 496
WIRE 160 496 128 496
WIRE 736 496 704 496
WIRE -416 528 -416 384
WIRE -416 528 -512 528
WIRE 80 528 -416 528
WIRE 656 528 80 528
WIRE -592 544 -592 496
WIRE -560 544 -592 544
WIRE 160 544 160 496
WIRE 160 544 128 544
WIRE 736 544 736 496
WIRE 736 544 704 544
WIRE -896 624 -896 496
WIRE -784 624 -784 560
WIRE -784 624 -896 624
WIRE -560 624 -560 544
WIRE -560 624 -784 624
WIRE -128 624 -560 624
WIRE 16 624 16 240
WIRE 16 624 -128 624
WIRE 128 624 128 544
WIRE 128 624 16 624
WIRE 240 624 240 240
WIRE 240 624 128 624
WIRE 704 624 704 544
WIRE 704 624 240 624
WIRE 1136 624 1136 256
WIRE 1136 624 704 624
WIRE -128 704 -128 624
FLAG -1232 192 0
FLAG 496 416 0
FLAG -128 704 0
SYMBOL npn -832 400 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res -768 464 M0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL npn -848 304 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cmosp -736 -192 R180
SYMATTR InstName M1
SYMATTR Value2 l=180n w=5u
SYMBOL res -880 -304 M0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL cmosp -608 -192 M180
SYMATTR InstName M2
SYMATTR Value2 l=180n w=5u
SYMBOL cmosn -512 448 M0
SYMATTR InstName M3
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 80 448 R0
SYMATTR InstName M4
SYMATTR Value2 l=180n w=2u
SYMBOL cmosp 32 -96 R180
SYMATTR InstName M5
SYMATTR Value2 l=360n w=2u
SYMBOL cmosp 224 -96 M180
SYMATTR InstName M6
SYMATTR Value2 l=360n w=2u
SYMBOL cmosn -64 192 R0
SYMATTR InstName M7
SYMATTR Value2 l=180n w=1u
SYMBOL cmosn 320 192 M0
SYMATTR InstName M8
SYMATTR Value2 l=180n w=1u
SYMBOL cmosp 656 48 M180
SYMATTR InstName M9
SYMATTR Value2 l=180n w=10u
SYMBOL cmosn 656 448 R0
SYMATTR InstName M10
SYMATTR Value2 l=180n w=2u
SYMBOL cmosp 1088 256 M180
SYMATTR InstName M11
SYMATTR Value2 l=180n w=10u
SYMBOL cmosp 1088 -192 M180
SYMATTR InstName M12
SYMATTR Value2 l=180n w=5u
SYMBOL voltage -1232 16 R0
WINDOW 123 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1.8 1n 1n)
SYMBOL voltage 496 320 R0
WINDOW 3 24 44 Left 2
WINDOW 123 24 72 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0.9 1 50n 1n 1n 62.5n 125n)
SYMATTR InstName V2
TEXT -480 800 Left 2 ;Fsw = 8MHz, So UGB = 800KHz, So BW of Error Amplifer >> 800KHz. I have taken it Gain cross over frequency of error amplifier to be 8MHz
TEXT -464 -496 Left 2 !.include tsmc018.lib
TEXT -176 824 Left 2 ;Required Phase margin is 72 Degrees (Q=0.5, Optimal step response without overshoot)
TEXT -464 -464 Left 2 !.tran 0 50u 0 10p
